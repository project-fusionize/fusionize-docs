<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="500" fill="#242526"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#e5e5e5">Node Execution Lifecycle</text>
  
  <!-- Orchestrator -->
  <rect x="50" y="80" width="140" height="60" rx="6" fill="#4a90e2" stroke="#6ab0ff" stroke-width="2"/>
  <text x="120" y="115" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Orchestrator</text>
  
  <!-- Event Bus -->
  <rect x="330" y="80" width="140" height="60" rx="6" fill="#50c878" stroke="#70e898" stroke-width="2"/>
  <text x="400" y="108" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Event Bus</text>
  <text x="400" y="125" text-anchor="middle" fill="white" font-size="11">(RabbitMQ)</text>
  
  <!-- Component Worker -->
  <rect x="610" y="80" width="140" height="60" rx="6" fill="#9b59b6" stroke="#b674d1" stroke-width="2"/>
  <text x="680" y="115" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Component</text>
  
  <!-- Step 1: Activation Event -->
  <line x1="190" y1="110" x2="330" y2="110" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrow2)"/>
  <text x="260" y="105" text-anchor="middle" font-size="11" fill="#e74c3c" font-weight="bold">1. ActivationEvent</text>
  
  <line x1="470" y1="110" x2="610" y2="110" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrow2)"/>
  
  <!-- Step 2: Activation Response -->
  <line x1="610" y1="190" x2="470" y2="190" stroke="#3498db" stroke-width="2" marker-end="url(#arrow2)"/>
  <text x="540" y="185" text-anchor="middle" font-size="11" fill="#3498db" font-weight="bold">2. ActivationResponse</text>
  <text x="540" y="200" text-anchor="middle" font-size="10" fill="#3498db">(WORKING)</text>
  
  <line x1="330" y1="190" x2="190" y2="190" stroke="#3498db" stroke-width="2" marker-end="url(#arrow2)"/>
  
  <!-- Step 3: Invocation Event -->
  <line x1="190" y1="270" x2="330" y2="270" stroke="#f39c12" stroke-width="2" marker-end="url(#arrow2)"/>
  <text x="260" y="265" text-anchor="middle" font-size="11" fill="#f39c12" font-weight="bold">3. InvocationEvent</text>
  
  <line x1="470" y1="270" x2="610" y2="270" stroke="#f39c12" stroke-width="2" marker-end="url(#arrow2)"/>
  
  <!-- Step 4: Component Executes -->
  <rect x="630" y="310" width="100" height="40" rx="4" fill="#2c2e30" stroke="#5d6d7e" stroke-width="1" stroke-dasharray="4"/>
  <text x="680" y="335" text-anchor="middle" font-size="11" fill="#909497" font-style="italic">Executes Logic</text>
  
  <!-- Step 5: Invocation Response -->
  <line x1="610" y1="390" x2="470" y2="390" stroke="#27ae60" stroke-width="2" marker-end="url(#arrow2)"/>
  <text x="540" y="385" text-anchor="middle" font-size="11" fill="#27ae60" font-weight="bold">4. InvocationResponse</text>
  <text x="540" y="400" text-anchor="middle" font-size="10" fill="#27ae60">(with results)</text>
  
  <line x1="330" y1="390" x2="190" y2="390" stroke="#27ae60" stroke-width="2" marker-end="url(#arrow2)"/>
  
  <!-- Step 6: Navigate to Next -->
  <rect x="50" y="430" width="140" height="50" rx="4" fill="#2c2e30" stroke="#5d6d7e" stroke-width="1" stroke-dasharray="4"/>
  <text x="120" y="450" text-anchor="middle" font-size="11" fill="#909497" font-style="italic">Update Context</text>
  <text x="120" y="465" text-anchor="middle" font-size="11" fill="#909497" font-style="italic">Navigate Next</text>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e5e5e5" />
    </marker>
  </defs>
</svg>
